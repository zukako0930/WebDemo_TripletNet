<!DOCTYPE html>
<html lang="ja">
<head>
<title>Clothes Search Engine by Triplet Loss</title>
<!-- <script type="javascript" src="root_script.js"></script>
<script type="javascript" src="jquery-3.3.1.min.js"></script> -->
<!-- <script type="javascript" src="./js/jquery-3.3.1.min.js"></script>
<script type="javascript" src="./js/root_script.js"></script> -->
</head>
<h1>ここに結果を表示する予定です。</h1>
<form action="#" class="form">
    <!-- inputタグでuploadされたファイルを保持 -->
    <input type="file" id="upload_file" name="">
    <!-- このボタンのonclickでファイルをPOSTでserver.pyのpredictに渡す -->
    <button type="submit" id="retrieval_button">検索</button>
</form>
<footer>©︎Zukako's Research</footer>
<script>console.log(location.pathname);</script>
<script>
$(document).ready(function(){
    $('#retrieval_button').on('click',function(){
        console.log('func');
        var formdata = new FormData($(this).get(0));
        console.log(formdata);
        $.ajax({
            url  : "http://0.0.0.0:3001/predict",
            type : "POST",
            data : formdata,
            cache       : false,
            contentType : false,
            processData : false,
            // dataType    : "html"
        })
        .done(function(data, textStatus, jqXHR){
            alert(data);
        })
        .fail(function(jqXHR, textStatus, errorThrown){
            alert("fail");
        });
    });
});
</script>
</html>